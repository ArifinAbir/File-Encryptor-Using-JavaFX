<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.rfn.fileencryptor.controller.ForgotPasswordController"
            fitToWidth="true">

    <VBox alignment="CENTER" spacing="15" padding="30">

        <!-- Title -->
        <Label text="Password Recovery">
            <font>
                <Font name="System Bold" size="24"/>
            </font>
        </Label>

        <Label text="Answer your security questions to reset password"/>

        <Separator prefWidth="400"/>

        <!-- Username Section -->
        <VBox spacing="10" alignment="CENTER">

            <Label text="Step 1: Enter Your Username">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>

            <VBox spacing="5">
                <Label text="Username:"/>
                <TextField fx:id="usernameField"
                           promptText="Enter your username"
                           prefWidth="350"/>
            </VBox>

            <Button fx:id="verifyButton" text="Verify Username"
                    onAction="#handleVerifyUsername"
                    prefWidth="200"/>

        </VBox>

        <Separator prefWidth="400"/>

        <!-- Security Questions Section -->
        <VBox spacing="10" alignment="CENTER">

            <Label text="Step 2: Answer Security Questions">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>

            <!-- Question 1 -->
            <VBox spacing="5">
                <Label fx:id="question1Label" text="Question 1:"
                       visible="false"/>
                <TextField fx:id="answer1Field"
                           promptText="Your answer"
                           prefWidth="350"
                           visible="false"/>
            </VBox>

            <!-- Question 2 -->
            <VBox spacing="5">
                <Label fx:id="question2Label" text="Question 2:"
                       visible="false"/>
                <TextField fx:id="answer2Field"
                           promptText="Your answer"
                           prefWidth="350"
                           visible="false"/>
            </VBox>

            <!-- Question 3 -->
            <VBox spacing="5">
                <Label fx:id="question3Label" text="Question 3:"
                       visible="false"/>
                <TextField fx:id="answer3Field"
                           promptText="Your answer"
                           prefWidth="350"
                           visible="false"/>
            </VBox>

        </VBox>

        <Separator prefWidth="400"/>

        <!-- New Password Section -->
        <VBox spacing="10" alignment="CENTER">

            <Label text="Step 3: Set New Password">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>

            <VBox spacing="5">
                <Label text="New Password:"/>
                <PasswordField fx:id="newPasswordField"
                               promptText="Enter new password"
                               prefWidth="350"
                               visible="false"/>
            </VBox>

            <VBox spacing="5">
                <Label text="Confirm Password:"/>
                <PasswordField fx:id="confirmPasswordField"
                               promptText="Re-enter password"
                               prefWidth="350"
                               visible="false"/>
            </VBox>

            <Button fx:id="resetPasswordButton" text="Reset Password"
                    onAction="#handleResetPassword"
                    prefWidth="200"
                    visible="false">
                <font>
                    <Font name="System Bold" size="14"/>
                </font>
            </Button>

        </VBox>

        <Separator prefWidth="400"/>

        <!-- Error Label -->
        <Label fx:id="errorLabel" textFill="red" wrapText="true"
               prefWidth="350" visible="false"/>

        <!-- Back to Login -->
        <HBox alignment="CENTER">
            <Label text="Remember your password? "/>
            <Hyperlink fx:id="backToLoginLink" text="Back to Login"
                       onAction="#handleBackToLogin"/>
        </HBox>

    </VBox>

</ScrollPane>
